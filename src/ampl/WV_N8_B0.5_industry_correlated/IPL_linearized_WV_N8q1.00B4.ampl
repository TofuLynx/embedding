
#parameters    
param n, integer, > 0; /* number of assets */    
param B, >= 0;      
param mu{i in 1..n};                          
param sigma{i in 1..n, j in 1..n};    
param q;    
                                              
#variables                                    
var y{i in 1..n, j in 1..n}, binary;    
var x{i in 1..n}, binary;                     
    
#capacity constraint    
s.t. card0: sum{i in 1..n} x[i] = B ;    
#constraints to link x and y                   
s.t. card1{i in 1..n,j in 1..n}: y[i,j] <= x[i] ;    
s.t. card2{i in 1..n,j in 1..n}: y[i,j] <= x[j] ;    
s.t. card3{i in 1..n,j in 1..n}: y[i,j] >= x[i]+x[j]-1 ;    
    
#objective function    
maximize obj: sum{i in 1..n, j in 1..n} y[i,j] * sigma[i,j];    

solve;
printf: "{ ""solution"": [%d", x[1] > "results/WV_N8_B0.5_industry_correlated/IPL_linearized_WV_N8q1.00B4_solution.json";
printf{i in 2..n}: ",%d", x[i] >> "results/WV_N8_B0.5_industry_correlated/IPL_linearized_WV_N8q1.00B4_solution.json";
printf: "]}" >> "results/WV_N8_B0.5_industry_correlated/IPL_linearized_WV_N8q1.00B4_solution.json";

#data:
data;

param n := 8;
param q := 1;
param B := 4;
param mu :=
1 0.002087286854557753
2 -0.0004008715924564684
3 -0.003693757359155897
4 -0.02817106565198864
5 -0.025372355446965155
6 0.004702226069820461
7 0.0047780847758397355
8 0.0009701599300816254;
param sigma : 1 2 3 4 5 6 7 8 :=
1 0.00020992579641120822 9.019255164023667e-06 8.515996207015124e-05 -0.00029812801195985454 -0.00028577376740493877 0.00014288900663181968 0.00015471463947045036 3.4581755436328286e-05
2 9.019255164023667e-06 0.0001709515338355733 6.353345497787761e-05 8.469269374847428e-05 0.00010305982724645175 2.5071250621376617e-06 4.176370560654239e-06 2.264770268382433e-05
3 8.515996207015124e-05 6.353345497787761e-05 0.0001223051442794432 0.0001682559177087621 0.0001986663187663061 7.69732025851137e-05 8.334628217540298e-05 3.560073037350723e-05
4 -0.00029812801195985454 8.469269374847428e-05 0.0001682559177087621 0.005412189466872491 0.005582483578594521 0.00012468368020690523 0.00010550348426971214 -8.686441179988514e-05
5 -0.00028577376740493877 0.00010305982724645175 0.0001986663187663061 0.005582483578594521 0.005910047772862706 0.00014862295091585965 0.0001370100708774632 -9.43612125594085e-05
6 0.00014288900663181968 2.5071250621376617e-06 7.69732025851137e-05 0.00012468368020690523 0.00014862295091585965 0.00021738029236239773 0.00022141891414040365 2.4635603780883672e-05
7 0.00015471463947045036 4.176370560654239e-06 8.334628217540298e-05 0.00010550348426971214 0.0001370100708774632 0.00022141891414040365 0.00022914146511249619 2.5913983667336595e-05
8 3.4581755436328286e-05 2.264770268382433e-05 3.560073037350723e-05 -8.686441179988514e-05 -9.43612125594085e-05 2.4635603780883672e-05 2.5913983667336595e-05 5.1793049285549746e-05;
end;
